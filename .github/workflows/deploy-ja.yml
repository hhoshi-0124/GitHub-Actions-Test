name: Deploy_Ja_on_Comment_with_Hashtag

on:
  pull_request:
    types: [opened, synchronize, reopened]
    branches:
      - main

run-name: "国内版"
    

jobs:
  test01:
    runs-on: ubuntu-latest
    steps:
      - name: abc
        run: |
            echo ${{ secrets.TEST_GITHUB_TOKEN }}

      - uses: shogo82148/actions-mutex@main
        with:
          token: ${{ secrets.TEST_GITHUB_TOKEN }}
          key: "my-resource-key"

    
      - name: Create event JSON file
        env:
            PR_OBJECT_JSON: ${{ toJson(github) }}
        run: |
         mkdir -p event_data
          printf "%s" "$PR_OBJECT_JSON" > event_data/pull_request_event.json
          echo "github.event data saved to event_data/pull_request_event.json"

      - name: Upload event JSON as artifact
        uses: actions/upload-artifact@v4
        with:
          name: pull-request-event-data
          path: event_data/pull_request_event.json
          retention-days: 1
          
      - name: start
        env:
            TZ: 'Asia/Tokyo'
        run: echo "GitHub Actions Start($(date '+%Y-%m-%d %H:%M:%S'))"
      - name: IP Address
        run: |
          IP=$(curl -s https://checkip.amazonaws.com/)
          echo "IP Address: $IP"
      - name: wait
        run: sleep 30
      - name: end
        env:
            TZ: 'Asia/Tokyo'
        run: echo "GitHub Actions End($(date '+%Y-%m-%d %H:%M:%S'))"

