name: Deploy Ja on Comment with Hashtag

on:
  pull_request:
    types: [opened, synchronize, reopened]
    branches:
      - main

run-name: "国内版(${{ github.event.comment.created_at }})"
    
concurrency:
  group: document-prod
  cancel-in-progress: false

jobs:
  test01:
    runs-on: ubuntu-latest
    steps:
      - name: Debug Output of pull_request.title
        run: |
          echo "--- Start Debug Output ---"
          echo "Value of github.event.pull_request.title is:"
          printf "%s\n" "${{ github.event.pull_request.title }}"
          echo "Value of toJson(github.event.pull_request.title) is:"
          printf "%s\n" "${{ toJson(github.event.pull_request.title) }}"

      - name: Create event JSON file
        run: |
         mkdir -p event_data
          echo "${{ toJSON(github) }}" > event_data/pull_request_event.json
          echo "github.event data saved to event_data/pull_request_event.json"

      - name: Upload event JSON as artifact
        uses: actions/upload-artifact@v4
        with:
          name: pull-request-event-data
          path: event_data/pull_request_event.json
          retention-days: 1
          
      - name: start
        env:
            TZ: 'Asia/Tokyo'
        run: echo "GitHub Actions Start($(date '+%Y-%m-%d %H:%M:%S'))"
      - name: IP Address
        run: |
          IP=$(curl -s https://checkip.amazonaws.com/)
          echo "IP Address: $IP"
      - name: wait
        run: sleep 30
      - name: end
        env:
            TZ: 'Asia/Tokyo'
        run: echo "GitHub Actions End($(date '+%Y-%m-%d %H:%M:%S'))"

